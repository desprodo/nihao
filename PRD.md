# 恋爱军师 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品定位
「恋爱军师」是一款极简的 AI 情感分析 H5 应用，单页面完成全部流程：上传朋友圈截图 → AI 分析 → 即时展示结果。帮助用户快速了解心动对象，获取可执行的追求建议。

### 1.2 核心目标
- **用户目标**：通过 AI 快速分析了解心动对象，获得简短有效的追求策略
- **产品目标**：提供极简体验，3 步完成分析
- **业务目标**：建立情感分析类产品认知，积累种子用户

### 1.3 目标用户
- 20-35 岁单身青年
- 有明确心动对象但不知如何接近
- 希望通过对方社交动态了解其真实性格

---

## 2. 核心功能

### 2.1 功能列表

| 功能模块 | 功能描述 | 优先级 |
|---------|---------|--------|
| 截图上传 | 支持上传 5 张以上朋友圈截图（JPG/PNG），单页内完成 | P0 |
| AI 分析 | 调用 Kimi 2.5 进行多模态分析，展示 loading 状态 | P0 |
| 结果展示 | 在同页面展示分析报告，无需跳转 | P0 |
| 重新分析 | 清空结果，支持重新上传 | P1 |

### 2.2 分析报告内容结构（简短有效）

```
💡 TA 的画像
   - 性格标签（2-3 个关键词）
   - 当前情感状态判断

🎯 追求策略
   - 破冰建议（1-2 句话）
   - 推荐话题（2-3 个）
   - 避雷提醒（1 句话）

⚡ 成功概率
   - 难度评级：⭐⭐⭐⭐⭐
   - 关键建议：最核心的一条行动建议
```

---

## 3. 技术架构

### 3.1 架构图

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   H5 前端    │────▶│  后端代理服务  │────▶│  Kimi API   │
│  (React/Vue) │◀────│   (Node.js)  │◀────│ (Moonshot)  │
└─────────────┘     └─────────────┘     └─────────────┘
       │                    │
       ▼                    ▼
┌─────────────┐     ┌─────────────┐
│  本地存储    │     │   文件存储   │
│ (IndexedDB) │     │  (OSS/S3)   │
└─────────────┘     └─────────────┘
```

### 3.2 技术栈

| 层级 | 技术选型 | 说明 |
|-----|---------|------|
| 前端 | React + TailwindCSS | H5 响应式页面 |
| 后端 | Node.js + Express/Fastify | API 代理服务 |
| AI | Kimi 2.5 (kimi-k2.5) | 多模态大模型 |
| 存储 | 阿里云 OSS / AWS S3 | 截图临时存储 |
| 部署 | Vercel / 阿里云 | 前后端分离部署 |

### 3.3 API 设计

#### 3.3.1 上传截图
```http
POST /api/upload
Content-Type: multipart/form-data

Request:
{
  "files": File[]  // 5-20 张图片，单张 < 5MB
}

Response:
{
  "code": 0,
  "data": {
    "uploadId": "uuid",
    "imageUrls": ["https://...", "https://..."]
  }
}
```

#### 3.3.2 生成分析报告
```http
POST /api/analyze
Content-Type: application/json

Request:
{
  "uploadId": "uuid",
  "imageUrls": ["https://..."],
  "targetGender": "female",  // 目标对象性别
  "relation": "crush"        // 当前关系阶段
}

Response:
{
  "code": 0,
  "data": {
    "reportId": "uuid",
    "status": "completed",
    "result": {
      "basicProfile": {...},
      "personality": {...},
      "interests": {...},
      "strategy": {...},
      "riskAssessment": {...}
    }
  }
}
```

---

## 4. 页面设计（单页面）

### 4.1 页面布局

只有一个页面，从上到下分为三个区域：

```
┌─────────────────────────────────┐
│         页面头部                 │
│    恋爱军师 | AI 助你读懂 TA      │
├─────────────────────────────────┤
│                                 │
│      上传区域（初始状态）          │
│    ┌───────────────────────┐   │
│    │    📸 拖拽或点击上传   │   │
│    │   至少上传 5 张截图    │   │
│    └───────────────────────┘   │
│                                 │
│    [缩略图预览网格]              │
│                                 │
│         [开始分析按钮]           │
│                                 │
├─────────────────────────────────┤
│      分析结果区域（分析后显示）     │
│    ┌───────────────────────┐   │
│    │     💡 TA 的画像       │   │
│    │     🎯 追求策略        │   │
│    │     ⚡ 成功概率        │   │
│    └───────────────────────┘   │
│                                 │
│       [重新分析按钮]             │
│                                 │
├─────────────────────────────────┤
│         底部隐私声明             │
└─────────────────────────────────┘
```

### 4.2 状态流转

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   初始状态   │────▶│   分析中    │────▶│   结果展示   │
│  (等待上传)  │     │  (loading)  │     │  (显示报告)  │
└─────────────┘     └─────────────┘     └─────────────┘
                                              │
                                              ▼
                                        [点击重新分析]
                                              │
                                              ▼
                                        ┌─────────────┐
                                        │   回到初始   │
                                        └─────────────┘
```

### 4.3 各区域详情

#### 上传区域
- **标题**：「上传 TA 的朋友圈截图」
- **上传区**：支持拖拽 + 点击选择
- **数量提示**：「至少上传 5 张，建议 5-15 张」
- **缩略图**：网格展示，支持删除单张
- **分析按钮**：上传达标后高亮显示

#### Loading 状态
- 按钮变为「AI 分析中...」+ 旋转动画
- 文案轮播：「正在分析性格特点...」「正在生成追求策略...」

#### 结果区域
- 卡片式设计，三个模块依次展开动画
- 💡 画像区：性格标签 + 情感状态
- 🎯 策略区：破冰 + 话题 + 避雷
- ⚡ 概率区：星级评分 + 核心建议

#### 底部
- 隐私声明：「图片仅用于 AI 分析，分析后即刻删除」

---

## 5. Prompt 设计

### 5.1 系统 Prompt

```
你是一个追求异性的高手，对于青春男女生的心理和外在表现，有非常强的洞察，也有一套很厉害的追求异性的技巧！擅长于输出简短但有效的分析和建议。

你的任务是基于用户提供的朋友圈截图，快速分析目标对象的画像，并给出可直接执行的追求策略。

输出要求：
1. 简短精炼，不要长篇大论
2. 分析要直击要害，建议要 actionable
3. 语气像朋友一样给出建议，不要太学术
4. 输出必须是 JSON 格式

输出字段：
- profile: TA 的画像（性格标签数组 + 情感状态）
- strategy: 追求策略（破冰建议 + 推荐话题数组 + 避雷提醒）
- successRate: 成功概率（难度星级 1-5 + 核心建议）
```

### 5.2 用户 Prompt 模板

```
请分析以下朋友圈截图中的心动对象：

请快速给出 TA 的画像、追求策略和成功概率评估。

以 JSON 格式返回，要求简短有效，直击要害。
```

---

## 6. 数据安全与隐私

### 6.1 隐私保护措施
- 图片分析后立即删除，不在服务器留存
- 分析报告仅当前会话可见，不保存历史
- 传输过程使用 HTTPS 加密
- 无用户账号系统，完全匿名

### 6.2 合规声明
- 明确告知用户数据用途
- 不涉及个人隐私信息爬取
- 用户主动上传，自愿授权分析

---

## 7. 迭代规划

### MVP (Week 1)
- [x] 单页面上传功能
- [x] Kimi API 接入
- [x] 同页结果展示

### V1.1 (Week 2)
- [ ] 重新分析功能
- [ ] 加载动画优化
- [ ] 结果复制分享

### V1.2 (后续)
- [ ] 历史记录（本地存储）
- [ ] 更多分析维度（星座、塔罗等趣味功能）
- [ ] 专家咨询服务（人工介入）

---

## 8. 附录

### 8.1 Kimi API 参考
- 文档：https://platform.moonshot.cn/docs/api/chat
- 模型：`kimi-k2.5`
- 图片输入：支持 base64 或 URL

### 8.2 成功指标
- 页面访问 → 开始分析转化率
- 平均上传图片数
- 分析完成率
- 重新分析次数（复用指标）

---

**文档版本**: v1.1
**创建时间**: 2026-01-29
**最后更新**: 2026-01-29（单页面版）

# 图片字幕生成器 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品名称
图片字幕生成器

### 1.2 产品定位
一款在线网页工具，允许用户上传图片并在图片底部添加多行字幕，生成具有"切割感"视觉效果的字幕图片，适用于社交媒体分享、表情包制作等场景。

### 1.3 目标用户
- 社交媒体内容创作者
- 自媒体运营人员
- 普通用户（制作表情包、配图等）

---

## 2. 功能需求

### 2.1 页面布局

页面采用**左右两栏布局**：

| 区域 | 位置 | 内容 |
|------|------|------|
| 设置面板 | 左侧 | 图片上传、字幕设置、字幕内容输入、操作按钮 |
| 预览面板 | 右侧 | 原图预览、生成效果实时预览 |

---

### 2.2 功能模块详细说明

#### 2.2.1 上传图片模块

| 功能项 | 说明 |
|--------|------|
| 上传按钮 | 点击"+ 选择图片"按钮，打开文件选择器 |
| 支持格式 | JPG、JPEG、PNG、GIF、WebP |
| 文件名显示 | 上传成功后，在按钮下方显示文件名 |
| 拖拽上传 | （可选）支持拖拽图片到上传区域 |

#### 2.2.2 字幕设置模块

| 设置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| 字幕高度 | 数值输入框 | 80 px | 每行字幕背景条的高度 |
| 字体大小 | 数值输入框 | 40 px | 字幕文字大小 |
| 字体颜色 | 颜色选择器 | #FFFFFF（白色） | 字幕文字颜色 |
| 轮廓颜色 | 颜色选择器 | #000000（黑色） | 文字描边/轮廓颜色 |
| 字体样式 | 下拉选择框 | 微软雅黑 | 可选：微软雅黑、黑体、宋体、楷体等 |
| 字体粗细 | 下拉选择框 | 正常 | 可选：正常、粗体 |

#### 2.2.3 字幕内容模块

| 功能项 | 说明 |
|--------|------|
| 输入方式 | 多行文本输入框（textarea） |
| 分行规则 | 每行文本对应一条字幕，换行符分隔 |
| 字数限制 | 建议单行不超过 30 个字符（可根据图片宽度自适应） |

#### 2.2.4 操作按钮模块

| 按钮 | 样式 | 功能 |
|------|------|------|
| 生成字幕图片 | 蓝色主按钮 | 根据设置生成带字幕的图片，更新预览 |
| 保存图片 | 白色/灰边次要按钮 | 将生成的图片下载到本地 |
| 状态提示 | 绿色文字提示 | 显示"字幕图片生成成功!"等状态信息 |

#### 2.2.5 预览模块

| 功能项 | 说明 |
|--------|------|
| 原图预览 | 显示用户上传的原始图片 |
| 效果预览 | 显示添加字幕后的最终效果 |
| 实时更新 | 点击"生成字幕图片"后更新预览 |

---

### 2.3 字幕渲染规则（核心）

#### 2.3.1 字幕背景条样式

```
┌─────────────────────────────────────┐
│                                     │
│           （图片内容区域）            │
│                                     │
├─────────────────────────────────────┤ ← 字幕背景条1
│     这是Manus的相关照片              │
├─────────────────────────────────────┤ ← 字幕背景条2
│     也是一个历史性的时刻              │
├─────────────────────────────────────┤ ← 字幕背景条3
│     Manus不一定会笑到最后            │
├─────────────────────────────────────┤ ← 字幕背景条4
│     但世界已经因此开始发生一些变化     │
└─────────────────────────────────────┘
```

#### 2.3.2 渲染规则

| 规则项 | 说明 |
|--------|------|
| 背景条颜色 | 半透明黑色（建议 rgba(0, 0, 0, 0.5) 或可配置） |
| 背景条宽度 | 与图片等宽（100%） |
| 背景条高度 | 由"字幕高度"设置项控制 |
| 切割感效果 | 每行字幕有独立的背景条，条与条之间**无间隙紧密排列** |
| 字幕位置 | 从图片底部向上依次排列 |
| 文字对齐 | 水平居中，垂直居中于背景条内 |
| 文字描边 | 使用"轮廓颜色"对文字添加描边效果，增强可读性 |

---

## 3. 技术实现建议

### 3.1 前端技术栈

| 技术 | 用途 |
|------|------|
| HTML5 Canvas | 图片渲染、字幕合成 |
| JavaScript | 交互逻辑 |
| CSS3 | 页面样式、布局 |
| 可选框架 | Vue.js / React / 原生 JS |

### 3.2 核心实现逻辑

```javascript
// 伪代码示意
1. 用户上传图片 → 加载到 Canvas
2. 用户输入字幕文本 → 按换行符分割为数组
3. 点击"生成"按钮：
   a. 在 Canvas 上绘制原图
   b. 计算字幕区域起始位置（图片高度 - 字幕总高度）
   c. 循环绘制每行字幕：
      - 绘制半透明背景条
      - 绘制文字（带描边）
4. 点击"保存"按钮 → Canvas.toDataURL() → 下载图片
```

### 3.3 字体加载

- 使用 Web 字体（Google Fonts / 本地字体文件）
- 确保中文字体正确加载后再进行渲染

---

## 4. 界面设计规范

### 4.1 配色方案

| 元素 | 颜色 |
|------|------|
| 主按钮 | #1890FF（蓝色） |
| 次要按钮 | #FFFFFF 背景 + #D9D9D9 边框 |
| 成功提示 | #52C41A（绿色） |
| 页面背景 | #F5F5F5（浅灰色） |
| 卡片背景 | #FFFFFF（白色） |

### 4.2 间距规范

| 元素 | 间距 |
|------|------|
| 卡片内边距 | 24px |
| 表单项间距 | 16px |
| 标签与输入框间距 | 8px |

### 4.3 响应式设计

| 屏幕宽度 | 布局 |
|----------|------|
| ≥ 992px | 左右两栏并排 |
| < 992px | 上下单栏堆叠（设置在上，预览在下） |

---

## 5. 用户操作流程

```
┌─────────────┐
│  打开网页    │
└──────┬──────┘
       ↓
┌─────────────┐
│  上传图片    │
└──────┬──────┘
       ↓
┌─────────────┐
│ 调整字幕设置 │ （可选，使用默认值也可）
└──────┬──────┘
       ↓
┌─────────────┐
│ 输入字幕内容 │ （多行文本）
└──────┬──────┘
       ↓
┌─────────────┐
│ 点击"生成"  │
└──────┬──────┘
       ↓
┌─────────────┐
│ 查看预览效果 │
└──────┬──────┘
       ↓
┌─────────────┐
│ 点击"保存"  │ → 下载图片到本地
└─────────────┘
```

---

## 6. 扩展功能（可选）

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 背景条透明度调节 | P1 | 允许用户调整背景条的透明度 |
| 背景条颜色自定义 | P1 | 允许用户选择背景条颜色（不仅是黑色） |
| 字幕位置选择 | P2 | 支持顶部/中部/底部位置 |
| 多图批量处理 | P2 | 同时为多张图片添加相同字幕 |
| 历史记录 | P3 | 保存用户的设置和最近使用的字幕 |
| 预设模板 | P3 | 提供几种常用的字幕样式模板 |

---

## 7. 验收标准

- [ ] 用户可成功上传 JPG/PNG/GIF/WebP 格式图片
- [ ] 字幕设置项（高度、字体大小、颜色、轮廓、字体、粗细）均可正常配置
- [ ] 字幕内容支持多行输入，每行独立渲染
- [ ] 生成的图片中，每行字幕有独立的半透明背景条，呈现"切割感"
- [ ] 预览区域正确显示原图和生成效果
- [ ] 点击"保存图片"可成功下载 PNG 格式图片
- [ ] 页面在主流浏览器（Chrome、Firefox、Safari、Edge）正常运行
- [ ] 页面在移动端可正常使用（响应式布局）

---

## 8. 版本记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2026-01-29 | 初始版本，完成核心功能 |
